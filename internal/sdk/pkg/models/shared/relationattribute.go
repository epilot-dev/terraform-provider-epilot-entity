// Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/epilot-dev/terraform-provider-epilot-entity/internal/sdk/pkg/utils"
	"time"
)

// ActionType - The action type. Currently supported actions:
//
// | action | description |
// |--------|-------------|
// | add_existing | Enables the user to pick an existing entity to link as relation |
// | create_new | Enables the user to create a new entity using the first/main `allowed_schemas` schema
// | create_from_existing | Enables the user to pick an existing entity to clone from, while creating a blank new entity to link as relation |
type ActionType string

const (
	ActionTypeAddExisting        ActionType = "add_existing"
	ActionTypeCreateNew          ActionType = "create_new"
	ActionTypeCreateFromExisting ActionType = "create_from_existing"
)

func (e ActionType) ToPointer() *ActionType {
	return &e
}

func (e *ActionType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "add_existing":
		fallthrough
	case "create_new":
		fallthrough
	case "create_from_existing":
		*e = ActionType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for ActionType: %v", v)
	}
}

type NewEntityItem struct {
	CreatedAt *time.Time `json:"_created_at"`
	ID        string     `json:"_id"`
	// Organization Id the entity belongs to
	Org string `json:"_org"`
	// URL-friendly identifier for the entity schema
	Schema string   `json:"_schema"`
	Tags   []string `json:"_tags,omitempty"`
	// Title of entity
	Title     *string     `json:"_title"`
	UpdatedAt *time.Time  `json:"_updated_at"`
	Entity    interface{} `additionalProperties:"true" json:"-"`
}

func (n NewEntityItem) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(n, "", false)
}

func (n *NewEntityItem) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &n, "", false, false); err != nil {
		return err
	}
	return nil
}

func (o *NewEntityItem) GetCreatedAt() *time.Time {
	if o == nil {
		return nil
	}
	return o.CreatedAt
}

func (o *NewEntityItem) GetID() string {
	if o == nil {
		return ""
	}
	return o.ID
}

func (o *NewEntityItem) GetOrg() string {
	if o == nil {
		return ""
	}
	return o.Org
}

func (o *NewEntityItem) GetSchema() string {
	if o == nil {
		return ""
	}
	return o.Schema
}

func (o *NewEntityItem) GetTags() []string {
	if o == nil {
		return nil
	}
	return o.Tags
}

func (o *NewEntityItem) GetTitle() *string {
	if o == nil {
		return nil
	}
	return o.Title
}

func (o *NewEntityItem) GetUpdatedAt() *time.Time {
	if o == nil {
		return nil
	}
	return o.UpdatedAt
}

func (o *NewEntityItem) GetEntity() interface{} {
	if o == nil {
		return nil
	}
	return o.Entity
}

type Actions struct {
	// The action type. Currently supported actions:
	//
	// | action | description |
	// |--------|-------------|
	// | add_existing | Enables the user to pick an existing entity to link as relation |
	// | create_new | Enables the user to create a new entity using the first/main `allowed_schemas` schema
	// | create_from_existing | Enables the user to pick an existing entity to clone from, while creating a blank new entity to link as relation |
	//
	ActionType *ActionType `json:"action_type,omitempty"`
	// Sets the action as the default action, visible as the main action button.
	Default *bool `json:"default,omitempty"`
	// Name of the feature flag that enables this action
	FeatureFlag *string `json:"feature_flag,omitempty"`
	// The action label or action translation key (i18n)
	Label         *string        `json:"label,omitempty"`
	NewEntityItem *NewEntityItem `json:"new_entity_item,omitempty"`
	// Name of the setting flag that enables this action
	SettingFlag *string `json:"setting_flag,omitempty"`
}

func (o *Actions) GetActionType() *ActionType {
	if o == nil {
		return nil
	}
	return o.ActionType
}

func (o *Actions) GetDefault() *bool {
	if o == nil {
		return nil
	}
	return o.Default
}

func (o *Actions) GetFeatureFlag() *string {
	if o == nil {
		return nil
	}
	return o.FeatureFlag
}

func (o *Actions) GetLabel() *string {
	if o == nil {
		return nil
	}
	return o.Label
}

func (o *Actions) GetNewEntityItem() *NewEntityItem {
	if o == nil {
		return nil
	}
	return o.NewEntityItem
}

func (o *Actions) GetSettingFlag() *string {
	if o == nil {
		return nil
	}
	return o.SettingFlag
}

// RelationAttributeConstraints - A set of constraints applicable to the attribute.
// These constraints should and will be enforced by the attribute renderer.
type RelationAttributeConstraints struct {
}

type DrawerSize string

const (
	DrawerSizeSmall  DrawerSize = "small"
	DrawerSizeMedium DrawerSize = "medium"
	DrawerSizeLarge  DrawerSize = "large"
)

func (e DrawerSize) ToPointer() *DrawerSize {
	return &e
}

func (e *DrawerSize) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "small":
		fallthrough
	case "medium":
		fallthrough
	case "large":
		*e = DrawerSize(v)
		return nil
	default:
		return fmt.Errorf("invalid value for DrawerSize: %v", v)
	}
}

type EditMode string

const (
	EditModeListView EditMode = "list-view"
)

func (e EditMode) ToPointer() *EditMode {
	return &e
}

func (e *EditMode) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "list-view":
		*e = EditMode(v)
		return nil
	default:
		return fmt.Errorf("invalid value for EditMode: %v", v)
	}
}

// RelationAffinityMode - Weak relation attributes are kept when duplicating an entity. Strong relation attributes are discarded when duplicating an entity.
type RelationAffinityMode string

const (
	RelationAffinityModeWeak   RelationAffinityMode = "weak"
	RelationAffinityModeStrong RelationAffinityMode = "strong"
)

func (e RelationAffinityMode) ToPointer() *RelationAffinityMode {
	return &e
}

func (e *RelationAffinityMode) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "weak":
		fallthrough
	case "strong":
		*e = RelationAffinityMode(v)
		return nil
	default:
		return fmt.Errorf("invalid value for RelationAffinityMode: %v", v)
	}
}

type RelationType string

const (
	RelationTypeHasMany RelationType = "has_many"
	RelationTypeHasOne  RelationType = "has_one"
)

func (e RelationType) ToPointer() *RelationType {
	return &e
}

func (e *RelationType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "has_many":
		fallthrough
	case "has_one":
		*e = RelationType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for RelationType: %v", v)
	}
}

type SummaryFieldsType string

const (
	SummaryFieldsTypeStr          SummaryFieldsType = "str"
	SummaryFieldsTypeSummaryField SummaryFieldsType = "SummaryField"
)

type SummaryFields struct {
	Str          *string
	SummaryField *SummaryField

	Type SummaryFieldsType
}

func CreateSummaryFieldsStr(str string) SummaryFields {
	typ := SummaryFieldsTypeStr

	return SummaryFields{
		Str:  &str,
		Type: typ,
	}
}

func CreateSummaryFieldsSummaryField(summaryField SummaryField) SummaryFields {
	typ := SummaryFieldsTypeSummaryField

	return SummaryFields{
		SummaryField: &summaryField,
		Type:         typ,
	}
}

func (u *SummaryFields) UnmarshalJSON(data []byte) error {

	summaryField := new(SummaryField)
	if err := utils.UnmarshalJSON(data, &summaryField, "", true, true); err == nil {
		u.SummaryField = summaryField
		u.Type = SummaryFieldsTypeSummaryField
		return nil
	}

	str := new(string)
	if err := utils.UnmarshalJSON(data, &str, "", true, true); err == nil {
		u.Str = str
		u.Type = SummaryFieldsTypeStr
		return nil
	}

	return errors.New("could not unmarshal into supported union types")
}

func (u SummaryFields) MarshalJSON() ([]byte, error) {
	if u.Str != nil {
		return utils.MarshalJSON(u.Str, "", true)
	}

	if u.SummaryField != nil {
		return utils.MarshalJSON(u.SummaryField, "", true)
	}

	return nil, errors.New("could not marshal union type: all fields are null")
}

type RelationAttributeType string

const (
	RelationAttributeTypeRelation RelationAttributeType = "relation"
)

func (e RelationAttributeType) ToPointer() *RelationAttributeType {
	return &e
}

func (e *RelationAttributeType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "relation":
		*e = RelationAttributeType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for RelationAttributeType: %v", v)
	}
}

// RelationAttribute - Entity Relationship
type RelationAttribute struct {
	Purpose []string  `json:"_purpose,omitempty"`
	Actions []Actions `json:"actions,omitempty"`
	// Optional label for the add button. The translated value for add_button_lable is used, if found else the string is used as is.
	AddButtonLabel *string  `json:"add_button_label,omitempty"`
	AllowedSchemas []string `json:"allowedSchemas,omitempty"`
	// A set of constraints applicable to the attribute.
	// These constraints should and will be enforced by the attribute renderer.
	//
	Constraints  *RelationAttributeConstraints `json:"constraints,omitempty"`
	DefaultValue interface{}                   `json:"default_value,omitempty"`
	Deprecated   *bool                         `default:"false" json:"deprecated"`
	// Enables the preview, edition, and creation of relation items on a Master-Details view mode.
	DetailsViewModeEnabled *bool       `default:"false" json:"details_view_mode_enabled"`
	DrawerSize             *DrawerSize `json:"drawer_size,omitempty"`
	EditMode               *EditMode   `json:"edit_mode,omitempty"`
	// When enable_relation_picker is set to true the user will be able to pick existing relations as values. Otherwise, the user will need to create new relation to link.
	EnableRelationPicker *bool `default:"true" json:"enable_relation_picker"`
	// When enable_relation_tags is set to true the user will be able to set tags(labels) in each relation item.
	EnableRelationTags *bool `default:"true" json:"enable_relation_tags"`
	// Setting to `true` disables editing the attribute on the entity builder UI
	EntityBuilderDisableEdit *bool `default:"false" json:"entity_builder_disable_edit"`
	// This attribute should only be active when the feature flag is enabled
	FeatureFlag *string `json:"feature_flag,omitempty"`
	// Which group the attribute should appear in. Accepts group ID or group name
	Group      *string `json:"group,omitempty"`
	HasPrimary *bool   `json:"has_primary,omitempty"`
	// Do not render attribute in entity views
	Hidden *bool `default:"false" json:"hidden"`
	// When set to true, will hide the label of the field.
	HideLabel *bool   `json:"hide_label,omitempty"`
	Icon      *string `json:"icon,omitempty"`
	Label     string  `json:"label"`
	Layout    *string `json:"layout,omitempty"`
	Name      string  `json:"name"`
	// Attribute sort order (ascending) in group
	Order                 *int64  `json:"order,omitempty"`
	Placeholder           *string `json:"placeholder,omitempty"`
	PreviewValueFormatter *string `json:"preview_value_formatter,omitempty"`
	// Setting to `true` prevents the attribute from being modified / deleted
	Protected *bool `default:"true" json:"protected"`
	Readonly  *bool `default:"false" json:"readonly"`
	// Weak relation attributes are kept when duplicating an entity. Strong relation attributes are discarded when duplicating an entity.
	RelationAffinityMode *RelationAffinityMode `json:"relation_affinity_mode,omitempty"`
	RelationType         *RelationType         `json:"relation_type,omitempty"`
	// Defines the conditional rendering expression for showing this field.
	// When a valid expression is parsed, their evaluation defines the visibility of this attribute.
	// Note: Empty or invalid expression have no effect on the field visibility.
	//
	RenderCondition *string `json:"render_condition,omitempty"`
	Required        *bool   `default:"false" json:"required"`
	// Map of schema slug to target relation attribute
	ReverseAttributes map[string]string `json:"reverse_attributes,omitempty"`
	// Optional placeholder text for the relation search input. The translated value for search_placeholder is used, if found else the string is used as is.
	SearchPlaceholder *string `json:"search_placeholder,omitempty"`
	// This attribute should only be active when the setting is enabled
	SettingFlag *string `json:"setting_flag,omitempty"`
	// Render as a column in table views. When defined, overrides `hidden`
	ShowInTable    *bool                  `json:"show_in_table,omitempty"`
	SummaryFields  []SummaryFields        `json:"summary_fields,omitempty"`
	Type           *RelationAttributeType `json:"type,omitempty"`
	ValueFormatter *string                `json:"value_formatter,omitempty"`
}

func (r RelationAttribute) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(r, "", false)
}

func (r *RelationAttribute) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &r, "", false, true); err != nil {
		return err
	}
	return nil
}

func (o *RelationAttribute) GetPurpose() []string {
	if o == nil {
		return nil
	}
	return o.Purpose
}

func (o *RelationAttribute) GetActions() []Actions {
	if o == nil {
		return nil
	}
	return o.Actions
}

func (o *RelationAttribute) GetAddButtonLabel() *string {
	if o == nil {
		return nil
	}
	return o.AddButtonLabel
}

func (o *RelationAttribute) GetAllowedSchemas() []string {
	if o == nil {
		return nil
	}
	return o.AllowedSchemas
}

func (o *RelationAttribute) GetConstraints() *RelationAttributeConstraints {
	if o == nil {
		return nil
	}
	return o.Constraints
}

func (o *RelationAttribute) GetDefaultValue() interface{} {
	if o == nil {
		return nil
	}
	return o.DefaultValue
}

func (o *RelationAttribute) GetDeprecated() *bool {
	if o == nil {
		return nil
	}
	return o.Deprecated
}

func (o *RelationAttribute) GetDetailsViewModeEnabled() *bool {
	if o == nil {
		return nil
	}
	return o.DetailsViewModeEnabled
}

func (o *RelationAttribute) GetDrawerSize() *DrawerSize {
	if o == nil {
		return nil
	}
	return o.DrawerSize
}

func (o *RelationAttribute) GetEditMode() *EditMode {
	if o == nil {
		return nil
	}
	return o.EditMode
}

func (o *RelationAttribute) GetEnableRelationPicker() *bool {
	if o == nil {
		return nil
	}
	return o.EnableRelationPicker
}

func (o *RelationAttribute) GetEnableRelationTags() *bool {
	if o == nil {
		return nil
	}
	return o.EnableRelationTags
}

func (o *RelationAttribute) GetEntityBuilderDisableEdit() *bool {
	if o == nil {
		return nil
	}
	return o.EntityBuilderDisableEdit
}

func (o *RelationAttribute) GetFeatureFlag() *string {
	if o == nil {
		return nil
	}
	return o.FeatureFlag
}

func (o *RelationAttribute) GetGroup() *string {
	if o == nil {
		return nil
	}
	return o.Group
}

func (o *RelationAttribute) GetHasPrimary() *bool {
	if o == nil {
		return nil
	}
	return o.HasPrimary
}

func (o *RelationAttribute) GetHidden() *bool {
	if o == nil {
		return nil
	}
	return o.Hidden
}

func (o *RelationAttribute) GetHideLabel() *bool {
	if o == nil {
		return nil
	}
	return o.HideLabel
}

func (o *RelationAttribute) GetIcon() *string {
	if o == nil {
		return nil
	}
	return o.Icon
}

func (o *RelationAttribute) GetLabel() string {
	if o == nil {
		return ""
	}
	return o.Label
}

func (o *RelationAttribute) GetLayout() *string {
	if o == nil {
		return nil
	}
	return o.Layout
}

func (o *RelationAttribute) GetName() string {
	if o == nil {
		return ""
	}
	return o.Name
}

func (o *RelationAttribute) GetOrder() *int64 {
	if o == nil {
		return nil
	}
	return o.Order
}

func (o *RelationAttribute) GetPlaceholder() *string {
	if o == nil {
		return nil
	}
	return o.Placeholder
}

func (o *RelationAttribute) GetPreviewValueFormatter() *string {
	if o == nil {
		return nil
	}
	return o.PreviewValueFormatter
}

func (o *RelationAttribute) GetProtected() *bool {
	if o == nil {
		return nil
	}
	return o.Protected
}

func (o *RelationAttribute) GetReadonly() *bool {
	if o == nil {
		return nil
	}
	return o.Readonly
}

func (o *RelationAttribute) GetRelationAffinityMode() *RelationAffinityMode {
	if o == nil {
		return nil
	}
	return o.RelationAffinityMode
}

func (o *RelationAttribute) GetRelationType() *RelationType {
	if o == nil {
		return nil
	}
	return o.RelationType
}

func (o *RelationAttribute) GetRenderCondition() *string {
	if o == nil {
		return nil
	}
	return o.RenderCondition
}

func (o *RelationAttribute) GetRequired() *bool {
	if o == nil {
		return nil
	}
	return o.Required
}

func (o *RelationAttribute) GetReverseAttributes() map[string]string {
	if o == nil {
		return nil
	}
	return o.ReverseAttributes
}

func (o *RelationAttribute) GetSearchPlaceholder() *string {
	if o == nil {
		return nil
	}
	return o.SearchPlaceholder
}

func (o *RelationAttribute) GetSettingFlag() *string {
	if o == nil {
		return nil
	}
	return o.SettingFlag
}

func (o *RelationAttribute) GetShowInTable() *bool {
	if o == nil {
		return nil
	}
	return o.ShowInTable
}

func (o *RelationAttribute) GetSummaryFields() []SummaryFields {
	if o == nil {
		return nil
	}
	return o.SummaryFields
}

func (o *RelationAttribute) GetType() *RelationAttributeType {
	if o == nil {
		return nil
	}
	return o.Type
}

func (o *RelationAttribute) GetValueFormatter() *string {
	if o == nil {
		return nil
	}
	return o.ValueFormatter
}
